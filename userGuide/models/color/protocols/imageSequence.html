

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Color model – Image Sequence Protocol &mdash; LBPM 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../../../_static/documentation_options.js?v=f2a433a1"></script>
      <script src="../../../../_static/doctools.js?v=9a2dae69"></script>
      <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Color model – Shell Aggregation Protocol" href="shellAggregation.html" />
    <link rel="prev" title="Color model – Fractional Flow Protocol" href="fractionalFlow.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            LBPM
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../install.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">User Guide</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">LBPM model summary</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">Color model</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="../index.html#simulation-protocols">Simulation protocols</a></li>
<li class="toctree-l4"><a class="reference internal" href="../index.html#analysis-capabilities">Analysis capabilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="../index.html#model-parameters">Model parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../index.html#model-formulation">Model Formulation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../index.html#boundary-conditions">Boundary Conditions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../index.html#example-data">Example data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../mrt/mrt.html">MRT model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cell/cell.html">Cell model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../greyscale/greyscale.html">Greyscale model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../greyscaleColor/greyscaleColor.html">Greyscale Color Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../freeEnergy/freeEnergy.html">Free energy model</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../visualization/visit.html">Visualizing simulation data with visit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../IO/fileformat.html">I/O conventions for LBPM</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developerGuide/index.html">Developer guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../examples/running.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../publications/publications.html">Publications</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">LBPM</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">User Guide</a></li>
          <li class="breadcrumb-item"><a href="../../index.html">LBPM model summary</a></li>
          <li class="breadcrumb-item"><a href="../index.html">Color model</a></li>
      <li class="breadcrumb-item active">Color model – Image Sequence Protocol</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/userGuide/models/color/protocols/imageSequence.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="color-model-image-sequence-protocol">
<h1>Color model – Image Sequence Protocol<a class="headerlink" href="#color-model-image-sequence-protocol" title="Link to this heading">¶</a></h1>
<p>The image sequence protocol is designed to perform a set steady-state
simulations based on a sequence of 3D (8-bit) images provided by the user.
The images might be the output of a previous LBPM simulation, a sequence of
(segmented) experimental data, or data generated from a custom routine.
The image sequence protocol will apply the same set of flow conditions
to all images in the sequence. This means</p>
<ul class="simple">
<li><p>the image labels and any associated properties are the same</p></li>
<li><p>the external boundary conditions are the same</p></li>
<li><p>the physical simulation parameters are the same</p></li>
</ul>
<p>The image sequence protocol does not set boundary conditions by default.
It is up to the user to determine the flow condition, with the understanding
that the same set of will be applied to each image in the sequence.</p>
<p>To enable the image sequence protocol, the following keys should be set
within the <code class="docutils literal notranslate"><span class="pre">Color</span></code> section of the input database</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Color<span class="w"> </span><span class="o">{</span>
<span class="w">   </span><span class="nv">protocol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;image sequence&quot;</span>
<span class="w">   </span><span class="nv">image_sequence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Bentheimer_LB_RelPerm_intermediate_oil_wet_Sw_0p37.raw&quot;</span>,<span class="w"> </span><span class="s2">&quot;Bentheimer_LB_RelPerm_intermediate_oil_wet_Sw_0p72.raw&quot;</span>
<span class="w">                                      </span>//<span class="w"> </span>comma<span class="w"> </span>separated<span class="w"> </span>list<span class="w"> </span>of<span class="w"> </span>image<span class="w"> </span>names
<span class="w">   </span><span class="nv">capillary_number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>1e-4<span class="w">            </span>//<span class="w"> </span>capillary<span class="w"> </span>number<span class="w"> </span><span class="k">for</span><span class="w"> </span>the<span class="w"> </span>displacement
<span class="w">   </span><span class="nv">timestepMax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1000000</span><span class="w">              </span>//<span class="w"> </span>maximum<span class="w"> </span>timtestep
<span class="w">   </span><span class="nv">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>.005<span class="w">                      </span>//<span class="w"> </span>controls<span class="w"> </span>interfacial<span class="w"> </span>tension
<span class="w">   </span><span class="nv">rhoA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span>.0<span class="w">                         </span>//<span class="w"> </span>controls<span class="w"> </span>the<span class="w"> </span>density<span class="w"> </span>of<span class="w"> </span>fluid<span class="w"> </span>A
<span class="w">   </span><span class="nv">rhoB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span>.0<span class="w">                         </span>//<span class="w"> </span>controls<span class="w"> </span>the<span class="w"> </span>density<span class="w"> </span>of<span class="w"> </span>fluid<span class="w"> </span>B
<span class="w">   </span><span class="nv">tauA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>.7<span class="w">                         </span>//<span class="w"> </span>controls<span class="w"> </span>the<span class="w"> </span>viscosity<span class="w"> </span>of<span class="w"> </span>fluid<span class="w"> </span>A
<span class="w">   </span><span class="nv">tauB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>.7<span class="w">                         </span>//<span class="w"> </span>controls<span class="w"> </span>the<span class="w"> </span>viscosity<span class="w"> </span>of<span class="w"> </span>fluid<span class="w"> </span>B
<span class="w">   </span><span class="nv">F</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>,<span class="w"> </span><span class="m">0</span>,<span class="w"> </span><span class="m">0</span><span class="w">                        </span>//<span class="w"> </span>body<span class="w"> </span>force
<span class="w">   </span><span class="nv">WettingConvention</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;SCAL&quot;</span><span class="w">         </span>//<span class="w"> </span>convention<span class="w"> </span><span class="k">for</span><span class="w"> </span>sign<span class="w"> </span>of<span class="w"> </span>wetting<span class="w"> </span>affinity
<span class="w">   </span><span class="nv">ComponentLabels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>,<span class="w"> </span>-1,<span class="w"> </span>-2<span class="w">        </span>//<span class="w"> </span>image<span class="w"> </span>labels<span class="w"> </span><span class="k">for</span><span class="w"> </span>solid<span class="w"> </span>voxels
<span class="w">   </span><span class="nv">ComponentAffinity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span>.0,<span class="w"> </span><span class="m">1</span>.0,<span class="w"> </span><span class="m">0</span>.6<span class="w">  </span>//<span class="w"> </span>controls<span class="w"> </span>the<span class="w"> </span>wetting<span class="w"> </span>affinity<span class="w"> </span><span class="k">for</span><span class="w"> </span>each<span class="w"> </span>label
<span class="w">   </span><span class="nv">Restart</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span>
<span class="o">}</span>
Domain<span class="w"> </span><span class="o">{</span>
<span class="w">   </span><span class="nv">Filename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Bentheimer_LB_RelPerm_intermediate_oil_wet_Sw_0p37.raw&quot;</span>
<span class="w">   </span><span class="nv">ReadType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;8bit&quot;</span><span class="w">              </span>//<span class="w"> </span>data<span class="w"> </span><span class="nb">type</span>
<span class="w">   </span><span class="nv">N</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">900</span>,<span class="w"> </span><span class="m">900</span>,<span class="w"> </span><span class="m">1600</span><span class="w">             </span>//<span class="w"> </span>size<span class="w"> </span>of<span class="w"> </span>original<span class="w"> </span>image
<span class="w">   </span><span class="nv">nproc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span>,<span class="w"> </span><span class="m">2</span>,<span class="w"> </span><span class="m">2</span><span class="w">                </span>//<span class="w"> </span>process<span class="w"> </span>grid
<span class="w">   </span><span class="nv">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">200</span>,<span class="w"> </span><span class="m">200</span>,<span class="w"> </span><span class="m">200</span><span class="w">              </span>//<span class="w"> </span>sub-domain<span class="w"> </span>size
<span class="w">   </span><span class="nv">offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">300</span>,<span class="w"> </span><span class="m">300</span>,<span class="w"> </span><span class="m">300</span><span class="w">         </span>//<span class="w"> </span>offset<span class="w"> </span>to<span class="w"> </span><span class="nb">read</span><span class="w"> </span>sub-domain
<span class="w">   </span><span class="nv">voxel_length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span>.66<span class="w">            </span>//<span class="w"> </span>voxel<span class="w"> </span>length<span class="w"> </span><span class="o">(</span><span class="k">in</span><span class="w"> </span>microns<span class="o">)</span>
<span class="w">   </span><span class="nv">ReadValues</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>-2,<span class="w"> </span>-1,<span class="w"> </span><span class="m">0</span>,<span class="w"> </span><span class="m">1</span>,<span class="w"> </span><span class="m">2</span><span class="w">   </span>//<span class="w"> </span>labels<span class="w"> </span>within<span class="w"> </span>the<span class="w"> </span>original<span class="w"> </span>image
<span class="w">   </span><span class="nv">WriteValues</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>-2,<span class="w"> </span>-1,<span class="w"> </span><span class="m">0</span>,<span class="w"> </span><span class="m">1</span>,<span class="w"> </span><span class="m">2</span><span class="w">  </span>//<span class="w"> </span>associated<span class="w"> </span>labels<span class="w"> </span>to<span class="w"> </span>be<span class="w"> </span>used<span class="w"> </span>by<span class="w"> </span>LBPM
<span class="w">   </span><span class="nv">BC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="w">                         </span>//<span class="w"> </span>boundary<span class="w"> </span>condition<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="o">(</span><span class="m">0</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>periodic<span class="o">)</span>
<span class="o">}</span>
Analysis<span class="w"> </span><span class="o">{</span>
<span class="w">   </span><span class="nv">analysis_interval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1000</span><span class="w">           </span>//<span class="w"> </span>logging<span class="w"> </span>interval<span class="w"> </span><span class="k">for</span><span class="w"> </span>timelog.csv
<span class="w">   </span><span class="nv">subphase_analysis_interval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5000</span><span class="w">  </span>//<span class="w"> </span>loggging<span class="w"> </span>interval<span class="w"> </span><span class="k">for</span><span class="w"> </span>subphase.csv
<span class="w">   </span><span class="nv">visualization_interval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">100000</span><span class="w">    </span>//<span class="w"> </span>interval<span class="w"> </span>to<span class="w"> </span>write<span class="w"> </span>visualization<span class="w"> </span>files
<span class="w">   </span><span class="nv">N_threads</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="w">                      </span>//<span class="w"> </span>number<span class="w"> </span>of<span class="w"> </span>analysis<span class="w"> </span>threads<span class="w"> </span><span class="o">(</span>GPU<span class="w"> </span>version<span class="w"> </span>only<span class="o">)</span>
<span class="w">   </span><span class="nv">restart_interval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1000000</span><span class="w">         </span>//<span class="w"> </span>interval<span class="w"> </span>to<span class="w"> </span>write<span class="w"> </span>restart<span class="w"> </span>file
<span class="w">   </span><span class="nv">restart_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Restart&quot;</span><span class="w">           </span>//<span class="w"> </span>base<span class="w"> </span>name<span class="w"> </span>of<span class="w"> </span>restart<span class="w"> </span>file
<span class="o">}</span>
Visualization<span class="w"> </span><span class="o">{</span>
<span class="w">   </span><span class="nv">write_silo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="w">     </span>//<span class="w"> </span>write<span class="w"> </span>SILO<span class="w"> </span>databases<span class="w"> </span>with<span class="w"> </span>assigned<span class="w"> </span>variables
<span class="w">   </span><span class="nv">save_8bit_raw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="w">  </span>//<span class="w"> </span>write<span class="w"> </span>labeled<span class="w"> </span><span class="m">8</span>-bit<span class="w"> </span>binary<span class="w"> </span>files<span class="w"> </span>with<span class="w"> </span>phase<span class="w"> </span>assignments
<span class="w">   </span><span class="nv">save_phase_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="w">  </span>//<span class="w"> </span>save<span class="w"> </span>phase<span class="w"> </span>field<span class="w"> </span>within<span class="w"> </span>SILO<span class="w"> </span>database
<span class="w">   </span><span class="nv">save_pressure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="w">    </span>//<span class="w"> </span>save<span class="w"> </span>pressure<span class="w"> </span>field<span class="w"> </span>within<span class="w"> </span>SILO<span class="w"> </span>database
<span class="w">   </span><span class="nv">save_velocity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="w">    </span>//<span class="w"> </span>save<span class="w"> </span>velocity<span class="w"> </span>field<span class="w"> </span>within<span class="w"> </span>SILO<span class="w"> </span>database
<span class="o">}</span>
FlowAdaptor<span class="w"> </span><span class="o">{</span>
<span class="w">   </span><span class="nv">min_steady_timesteps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">100000</span><span class="w">     </span>//<span class="w"> </span>minimum<span class="w"> </span>number<span class="w"> </span>of<span class="w"> </span>timesteps<span class="w"> </span>per<span class="w"> </span>steady<span class="w"> </span>point
<span class="w">   </span><span class="nv">max_steady_timesteps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">250000</span><span class="w">     </span>//<span class="w"> </span>maximum<span class="w"> </span>number<span class="w"> </span>of<span class="w"> </span>timesteps<span class="w"> </span>per<span class="w"> </span>steady<span class="w"> </span>point
<span class="o">}</span>
</pre></div>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="fractionalFlow.html" class="btn btn-neutral float-left" title="Color model – Fractional Flow Protocol" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="shellAggregation.html" class="btn btn-neutral float-right" title="Color model – Shell Aggregation Protocol" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>